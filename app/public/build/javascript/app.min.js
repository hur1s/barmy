var app=angular.module("app",["ngRoute","appController"]).service("dbDataService",function($http){var promise,service={getRecipes:function(){return promise||(promise=$http.get("/api/drinks/").then(function($http){return $http.data})),promise},getRecipe:function(promise){return recipe=$http.get("/api/drinks/"+promise).then(function($http){return $http.data})}};return service});app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"templates/recipes.html",controller:"RecipeListController"}).when("/:itemId",{templateUrl:"templates/item.html",controller:"RecipeItemController"})}]);var appController=angular.module("appController",[]);appController.controller("RecipeListController",["dbDataService","$scope",function(dbDataService,$scope){dbDataService.getRecipes().then(function(response){$scope.recipes=response.recipes}),$scope.orderProp="-recipeId"}]),appController.controller("RecipeItemController",["dbDataService","$scope","$routeParams",function(dbDataService,$scope,$routeParams){$scope.id=$routeParams.itemId,dbDataService.getRecipe($routeParams.itemId).then(function(response){$scope.recipe=response,$scope.imageUrl="resources/recipe-images/cocktail-big-"+$scope.recipe.recipeId+".jpg"})}]),app.directive("recipeImage",function(){return{restrict:"A",link:function(scope,element,attrs){function preLoadImage(src){var image=new Image;$.get(src).done(function(){image.src=src,appendImage(image)}).fail(function(){image.src="resources/images/default-image.png",appendImage(image)})}function appendImage(image){element.append(image)}attrs.$observe("recipeImage",function(value){""!=value&&preLoadImage(value)})}}});
//# sourceMappingURL=app.min.js.map